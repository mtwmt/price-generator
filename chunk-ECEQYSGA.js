import{C as E,G as C,O as T,R as A,Rb as g,Sb as M,Tb as D,W as m,b as x,ba as w,da as S,g as R,ga as u,ha as P,j as K,n as k}from"./chunk-QI5KHR64.js";import{a as r,b as l}from"./chunk-FJYW2LMB.js";var O=Symbol("DEEP_SIGNAL");function W(t){return new Proxy(t,{has(e,n){return!!this.get(e,n,void 0)},get(e,n){let o=g(e);return!z(o)||!(n in o)?(u(e[n])&&e[n][O]&&delete e[n],e[n]):(u(e[n])||(Object.defineProperty(e,n,{value:M(()=>e()[n]),configurable:!0}),e[n][O]=!0),W(e[n]))}})}var q=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function z(t){if(t===null||typeof t!="object"||L(t))return!1;let e=Object.getPrototypeOf(t);if(e===Object.prototype)return!0;for(;e&&e!==Object.prototype;){if(q.includes(e.constructor))return!1;e=Object.getPrototypeOf(e)}return e===Object.prototype}function L(t){return typeof t?.[Symbol.iterator]=="function"}var _=new WeakMap,f=Symbol("STATE_SOURCE");function ee(t,...e){let n=g(()=>F(t)),o=e.reduce((s,a)=>r(r({},s),typeof a=="function"?a(s):a),n),c=t[f],i=Reflect.ownKeys(t[f]);for(let s of Reflect.ownKeys(o))if(i.includes(s)){let a=s;n[a]!==o[a]&&c[a].set(o[a])}$(t)}function F(t){let e=t[f];return Reflect.ownKeys(t[f]).reduce((n,o)=>{let c=e[o]();return l(r({},n),{[o]:c})},{})}function G(t){return _.get(t[f])||[]}function $(t){let e=G(t);for(let n of e){let o=g(()=>F(t));n(o)}}function te(...t){let e=[...t],n=typeof e[0]=="function"?{}:e.shift(),o=e;return(()=>{class i{constructor(){let a=o.reduce((b,U)=>U(b),B()),{stateSignals:p,props:y,methods:h,hooks:d}=a,j=r(r(r({},p),y),h);this[f]=a[f];for(let b of Reflect.ownKeys(j))this[b]=j[b];let{onInit:v,onDestroy:I}=d;v&&v(),I&&m(S).onDestroy(I)}static \u0275fac=function(p){return new(p||i)};static \u0275prov=A({token:i,factory:i.\u0275fac,providedIn:n.providedIn||null})}return i})()}function B(){return{[f]:{},stateSignals:{},props:{},methods:{},hooks:{}}}function H(t){return e=>{let n=t(r(r(r({[f]:e[f]},e.stateSignals),e.props),e.methods));return l(r({},e),{props:r(r({},e.props),n)})}}function ne(t){return H(e=>{let n=t(e);return Reflect.ownKeys(n).reduce((c,i)=>{let s=n[i];return l(r({},c),{[i]:u(s)?s:M(s)})},{})})}function oe(t){return e=>{let n=t(r(r(r({[f]:e[f]},e.stateSignals),e.props),e.methods));return l(r({},e),{methods:r(r({},e.methods),n)})}}function re(t){return e=>{let n=typeof t=="function"?t():t,o=Reflect.ownKeys(n),c=e[f],i={};for(let s of o)c[s]=P(n[s]),i[s]=W(c[s]);return l(r({},e),{stateSignals:r(r({},e.stateSignals),i)})}}function ue(t,e){let n=e?.injector??m(w),o=new R,c=t(o).subscribe();n.get(S).onDestroy(()=>c.unsubscribe());let i=(s,a)=>{if(V(s))return o.next(s),{destroy:x};let p=Y(),y=a?.injector??p??n;if(u(s)){let d=D(()=>{let j=s();g(()=>o.next(j))},{injector:y});return c.add({unsubscribe:()=>d.destroy()}),d}let h=s.subscribe(d=>o.next(d));return c.add(h),y!==n&&y.get(S).onDestroy(()=>h.unsubscribe()),{destroy:()=>h.unsubscribe()}};return i.destroy=c.unsubscribe.bind(c),i}function V(t){return!u(t)&&!k(t)}function Y(){try{return m(w)}catch{return}}function Se(t,e,n){let o=typeof t=="function"?{next:t,error:e,complete:n}:t;return c=>c.pipe(T({next:o.next,complete:o.complete}),E(i=>(o.error(i),K)),o.finalize?C(o.finalize):i=>i)}export{ee as a,te as b,ne as c,oe as d,re as e,ue as f,Se as g};
