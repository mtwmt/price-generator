import{A as Cr,Ca as je,D as Dr,Da as g,G as Rr,Ia as We,Ja as I,Jb as N,La as C,M as Sr,Oa as we,P as V,Q as k,Qa as Vr,R as S,S as xe,Sa as Lr,Tb as te,U as P,Ub as O,V as he,Va as Fr,W as A,Wa as dt,X as Pr,Z as kr,_ as Nr,_b as an,ac as xr,ca as Or,d as Ir,da as sn,dc as cn,g as wr,ha as L,ja as Mr,k as br,ka as Ue,l as rn,la as W,na as Be,nb as fe,oc as Ur,p as Tr,pc as Br,r as de,x as Ar,zb as on}from"./chunk-4R6RTNNY.js";import{a as p,b as w,d as Fe,g as ue,h as a}from"./chunk-FJYW2LMB.js";var Xr=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(g(je),g(Be))};static \u0275dir=I({type:n})}return n})(),Ye=(()=>{class n extends Xr{static \u0275fac=(()=>{let t;return function(i){return(t||(t=W(n)))(i||n)}})();static \u0275dir=I({type:n,features:[C]})}return n})(),me=new P(""),_o={provide:me,useExisting:k(()=>yo),multi:!0},yo=(()=>{class n extends Ye{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=W(n)))(i||n)}})();static \u0275dir=I({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&fe("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[N([_o]),C]})}return n})(),vo={provide:me,useExisting:k(()=>Zr),multi:!0};function Eo(){let n=cn()?cn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Io=new P(""),Zr=(()=>{class n extends Xr{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Eo())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(g(je),g(Be),g(Io,8))};static \u0275dir=I({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&fe("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[N([vo]),C]})}return n})();function pn(n){return n==null||mn(n)===0}function mn(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var re=new P(""),Xe=new P(""),wo=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,jr=class{static min(e){return Qr(e)}static max(e){return ei(e)}static required(e){return bo(e)}static requiredTrue(e){return To(e)}static email(e){return Ao(e)}static minLength(e){return Co(e)}static maxLength(e){return ti(e)}static pattern(e){return Do(e)}static nullValidator(e){return ft()}static compose(e){return ai(e)}static composeAsync(e){return li(e)}};function Qr(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function ei(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function bo(n){return pn(n.value)?{required:!0}:null}function To(n){return n.value===!0?null:{required:!0}}function Ao(n){return pn(n.value)||wo.test(n.value)?null:{email:!0}}function Co(n){return e=>{let t=e.value?.length??mn(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function ti(n){return e=>{let t=e.value?.length??mn(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function Do(n){if(!n)return ft;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(pn(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function ft(n){return null}function ni(n){return n!=null}function ri(n){return Lr(n)?br(n):n}function ii(n){let e={};return n.forEach(t=>{e=t!=null?p(p({},e),t):e}),Object.keys(e).length===0?null:e}function si(n,e){return e.map(t=>t(n))}function Ro(n){return!n.validate}function oi(n){return n.map(e=>Ro(e)?e:t=>e.validate(t))}function ai(n){if(!n)return null;let e=n.filter(ni);return e.length==0?null:function(t){return ii(si(t,e))}}function ci(n){return n!=null?ai(oi(n)):null}function li(n){if(!n)return null;let e=n.filter(ni);return e.length==0?null:function(t){let r=si(t,e).map(ri);return Ar(r).pipe(de(ii))}}function ui(n){return n!=null?li(oi(n)):null}function Wr(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function di(n){return n._rawValidators}function hi(n){return n._rawAsyncValidators}function ln(n){return n?Array.isArray(n)?n:[n]:[]}function pt(n,e){return Array.isArray(n)?n.includes(e):n===e}function Hr(n,e){let t=ln(e);return ln(n).forEach(i=>{pt(t,i)||t.push(i)}),t}function Gr(n,e){return ln(e).filter(t=>!pt(n,t))}var mt=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ci(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ui(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},M=class extends mt{name;get formDirective(){return null}get path(){return null}},pe=class extends mt{_parent=null;name=null;valueAccessor=null},gt=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},So={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Gu=w(p({},So),{"[class.ng-submitted]":"isSubmitted"}),$u=(()=>{class n extends gt{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(g(pe,2))};static \u0275dir=I({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&on("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[C]})}return n})(),zu=(()=>{class n extends gt{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(g(M,10))};static \u0275dir=I({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&on("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[C]})}return n})();var He="VALID",ht="INVALID",be="PENDING",Ge="DISABLED",ne=class{},_t=class extends ne{value;source;constructor(e,t){super(),this.value=e,this.source=t}},$e=class extends ne{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},ze=class extends ne{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Te=class extends ne{status;source;constructor(e,t){super(),this.status=e,this.source=t}},un=class extends ne{source;constructor(e){super(),this.source=e}},Ke=class extends ne{source;constructor(e){super(),this.source=e}};function gn(n){return(It(n)?n.validators:n)||null}function Po(n){return Array.isArray(n)?ci(n):n||null}function _n(n,e){return(It(e)?e.asyncValidators:n)||null}function ko(n){return Array.isArray(n)?ui(n):n||null}function It(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function fi(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new V(1e3,"");if(!r[t])throw new V(1001,"")}function pi(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new V(1002,"")})}var Ae=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return te(this.statusReactive)}set status(e){te(()=>this.statusReactive.set(e))}_status=O(()=>this.statusReactive());statusReactive=L(void 0);get valid(){return this.status===He}get invalid(){return this.status===ht}get pending(){return this.status==be}get disabled(){return this.status===Ge}get enabled(){return this.status!==Ge}errors;get pristine(){return te(this.pristineReactive)}set pristine(e){te(()=>this.pristineReactive.set(e))}_pristine=O(()=>this.pristineReactive());pristineReactive=L(!0);get dirty(){return!this.pristine}get touched(){return te(this.touchedReactive)}set touched(e){te(()=>this.touchedReactive.set(e))}_touched=O(()=>this.touchedReactive());touchedReactive=L(!1);get untouched(){return!this.touched}_events=new wr;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Hr(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Hr(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Gr(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Gr(e,this._rawAsyncValidators))}hasValidator(e){return pt(this._rawValidators,e)}hasAsyncValidator(e){return pt(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(w(p({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ze(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new ze(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(w(p({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new $e(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new $e(!0,r))}markAsPending(e={}){this.status=be;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Te(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(w(p({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ge,this.errors=null,this._forEachChild(i=>{i.disable(w(p({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _t(this.value,r)),this._events.next(new Te(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(w(p({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=He,this._forEachChild(r=>{r.enable(w(p({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(w(p({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===He||this.status===be)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _t(this.value,t)),this._events.next(new Te(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(w(p({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ge:He}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=be,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=ri(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Te(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new we,this.statusChanges=new we}_calculateStatus(){return this._allControlsDisabled()?Ge:this.errors?ht:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(be)?be:this._anyControlsHaveStatus(ht)?ht:He}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new $e(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new ze(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){It(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Po(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=ko(this._rawAsyncValidators)}},yt=class extends Ae{constructor(e,t,r){super(gn(t),_n(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){pi(this,!0,e),Object.keys(e).forEach(r=>{fi(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Ke(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var dn=class extends yt{};var wt=new P("",{providedIn:"root",factory:()=>bt}),bt="always";function Tt(n,e){return[...e.path,n]}function hn(n,e,t=bt){yn(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Oo(n,e),Vo(n,e),Mo(n,e),No(n,e)}function $r(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Et(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function vt(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function No(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function yn(n,e){let t=di(n);e.validator!==null?n.setValidators(Wr(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=hi(n);e.asyncValidator!==null?n.setAsyncValidators(Wr(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();vt(e._rawValidators,i),vt(e._rawAsyncValidators,i)}function Et(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=di(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=hi(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return vt(e._rawValidators,r),vt(e._rawAsyncValidators,r),t}function Oo(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&mi(n,e)})}function Mo(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&mi(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function mi(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Vo(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Lo(n,e){n==null,yn(n,e)}function Fo(n,e){return Et(n,e)}function gi(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function xo(n){return Object.getPrototypeOf(n.constructor)===Ye}function Uo(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function _i(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Zr?t=s:xo(s)?r=s:i=s}),i||r||t||null}function Bo(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function zr(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function qr(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var qe=class extends Ae{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(gn(t),_n(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),It(t)&&(t.nonNullable||t.initialValueIsDefault)&&(qr(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Ke(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){zr(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){zr(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){qr(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var jo=n=>n instanceof qe,Wo=(()=>{class n extends M{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Tt(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let t;return function(i){return(t||(t=W(n)))(i||n)}})();static \u0275dir=I({type:n,standalone:!1,features:[C]})}return n})();var Ho={provide:pe,useExisting:k(()=>Go)},Kr=Promise.resolve(),Go=(()=>{class n extends pe{_changeDetectorRef;callSetDisabledState;control=new qe;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new we;constructor(t,r,i,s,o,l){super(),this._changeDetectorRef=o,this.callSetDisabledState=l,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=_i(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),gi(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){hn(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Kr.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&xr(r);Kr.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Tt(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(g(M,9),g(re,10),g(Xe,10),g(me,10),g(an,8),g(wt,8))};static \u0275dir=I({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[N([Ho]),C,Ue]})}return n})();var Ku=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=I({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),$o={provide:me,useExisting:k(()=>zo),multi:!0},zo=(()=>{class n extends Ye{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=W(n)))(i||n)}})();static \u0275dir=I({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&fe("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[N([$o]),C]})}return n})();var yi=new P("");var qo={provide:M,useExisting:k(()=>vi)},vi=(()=>{class n extends M{callSetDisabledState;get submitted(){return te(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=O(()=>this._submittedReactive());_submittedReactive=L(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new we;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Et(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return hn(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){$r(t.control||null,t,!1),Bo(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),Uo(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new un(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&($r(r||null,t),jo(i)&&(hn(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);Lo(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&Fo(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){yn(this.form,this),this._oldForm&&Et(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(g(re,10),g(Xe,10),g(wt,8))};static \u0275dir=I({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&fe("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[N([qo]),C,Ue]})}return n})(),Ko={provide:M,useExisting:k(()=>Ei)},Ei=(()=>{class n extends Wo{name=null;constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){wi(this._parent)}static \u0275fac=function(r){return new(r||n)(g(M,13),g(re,10),g(Xe,10))};static \u0275dir=I({type:n,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[N([Ko]),C]})}return n})(),Jo={provide:M,useExisting:k(()=>Ii)},Ii=(()=>{class n extends M{_parent;name=null;constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){wi(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Tt(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(r){return new(r||n)(g(M,13),g(re,10),g(Xe,10))};static \u0275dir=I({type:n,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[N([Jo]),C]})}return n})();function wi(n){return!(n instanceof Ei)&&!(n instanceof vi)&&!(n instanceof Ii)}var Yo={provide:pe,useExisting:k(()=>Xo)},Xo=(()=>{class n extends pe{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new we;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=_i(this,s)}ngOnChanges(t){this._added||this._setUpControl(),gi(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Tt(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(g(M,13),g(re,10),g(Xe,10),g(me,10),g(yi,8))};static \u0275dir=I({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[N([Yo]),C,Ue]})}return n})();var Zo={provide:me,useExisting:k(()=>Ti),multi:!0};function bi(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Qo(n){return n.split(":")[0]}var Ti=(()=>{class n extends Ye{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=A(Fr).injector;destroyRef=A(sn);cdr=A(an);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Vr({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=bi(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=Qo(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=W(n)))(i||n)}})();static \u0275dir=I({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&fe("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[N([Zo]),C]})}return n})(),Ju=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(bi(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(g(Be),g(je),g(Ti,9))};static \u0275dir=I({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),ea={provide:me,useExisting:k(()=>Ai),multi:!0};function Jr(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function ta(n){return n.split(":")[0]}var Ai=(()=>{class n extends Ye{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let l=0;l<o.length;l++){let c=o[l],u=this._getOptionValue(c.value);i.push(u)}}else{let o=r.options;for(let l=0;l<o.length;l++){let c=o[l];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=ta(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=W(n)))(i||n)}})();static \u0275dir=I({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&fe("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[N([ea]),C]})}return n})(),Yu=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Jr(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Jr(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(g(Be),g(je),g(Ai,9))};static \u0275dir=I({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function na(n){return typeof n=="number"?n:parseInt(n,10)}function Ci(n){return typeof n=="number"?n:parseFloat(n)}var vn=(()=>{class n{_validator=ft;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ft,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=I({type:n,features:[Ue]})}return n})(),ra={provide:re,useExisting:k(()=>ia),multi:!0},ia=(()=>{class n extends vn{max;inputName="max";normalizeInput=t=>Ci(t);createValidator=t=>ei(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=W(n)))(i||n)}})();static \u0275dir=I({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&dt("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[N([ra]),C]})}return n})(),sa={provide:re,useExisting:k(()=>oa),multi:!0},oa=(()=>{class n extends vn{min;inputName="min";normalizeInput=t=>Ci(t);createValidator=t=>Qr(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=W(n)))(i||n)}})();static \u0275dir=I({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&dt("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[N([sa]),C]})}return n})();var aa={provide:re,useExisting:k(()=>ca),multi:!0},ca=(()=>{class n extends vn{maxlength;inputName="maxlength";normalizeInput=t=>na(t);createValidator=t=>ti(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=W(n)))(i||n)}})();static \u0275dir=I({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&dt("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[N([aa]),C]})}return n})();var Di=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=We({type:n});static \u0275inj=xe({})}return n})(),fn=class extends Ae{constructor(e,t,r){super(gn(t),_n(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){pi(this,!1,e),e.forEach((r,i)=>{fi(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Ke(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function Yr(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Xu=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),s={};return Yr(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new yt(i,s)}record(t,r=null){let i=this._reduceControls(t);return new dn(i,r)}control(t,r,i){let s={};return this.useNonNullable?(Yr(r)?s=r:(s.validators=r,s.asyncValidators=i),new qe(t,w(p({},s),{nonNullable:!0}))):new qe(t,r,i)}array(t,r,i){let s=t.map(o=>this._createControl(o));return new fn(s,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof qe)return t;if(t instanceof Ae)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,i,s)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=S({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Zu=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:wt,useValue:t.callSetDisabledState??bt}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=We({type:n});static \u0275inj=xe({imports:[Di]})}return n})(),Qu=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:yi,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:wt,useValue:t.callSetDisabledState??bt}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=We({type:n});static \u0275inj=xe({imports:[Di]})}return n})();var Ri=(()=>{let e=class e{trackEvent(r,i){typeof window.gtag=="function"&&window.gtag("event",r,i)}trackQuotationGenerated(){this.trackEvent("quotation_generated",{event_category:"quotation",event_label:"generate"})}trackQuotationPreviewed(){this.trackEvent("quotation_previewed",{event_category:"quotation",event_label:"preview"})}trackExport(r){this.trackEvent("export",{event_category:"export",event_label:r,export_format:r})}trackHistoryLoaded(r){this.trackEvent("history_loaded",{event_category:"history",event_label:"load",history_index:r})}trackHistoryDeleted(r){this.trackEvent("history_deleted",{event_category:"history",event_label:"delete",history_index:r})}trackDonateClick(){this.trackEvent("donate_click",{event_category:"engagement",event_label:"donate"})}trackTabChange(r){this.trackEvent("tab_change",{event_category:"navigation",event_label:r})}trackError(r,i){this.trackEvent("error",{event_category:"error",event_label:i||"unknown",error_message:r.message,error_stack:r.stack?.substring(0,150)})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Si=(()=>{let e=class e{constructor(){this.DEFAULT_DURATION_MS=3e3,this.visible=L(!1),this.message=L(""),this.type=L("success")}success(r="\u64CD\u4F5C\u6210\u529F",i){this.show(r,"success",i)}error(r="\u64CD\u4F5C\u5931\u6557",i){this.show(r,"error",i)}info(r,i){this.show(r,"info",i)}warning(r,i){this.show(r,"warning",i)}show(r,i,s){this.timeoutId&&window.clearTimeout(this.timeoutId),this.message.set(r),this.type.set(i),this.visible.set(!0);let o=s??this.DEFAULT_DURATION_MS;this.timeoutId=window.setTimeout(()=>{this.hide()},o)}hide(){this.visible.set(!1),this.timeoutId&&(window.clearTimeout(this.timeoutId),this.timeoutId=void 0)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Pi=()=>{};var Oi=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},la=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],l=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Mi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,l=o?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,f=s>>2,m=(s&3)<<4|l>>4,d=(l&15)<<2|u>>6,E=u&63;c||(E=64,o||(d=64)),r.push(t[f],t[m],t[d],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Oi(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):la(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],l=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let m=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||l==null||u==null||m==null)throw new In;let d=s<<2|l>>4;if(r.push(d),u!==64){let E=l<<4&240|u>>2;if(r.push(E),m!==64){let D=u<<6&192|m;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},In=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ua=function(n){let e=Oi(n);return Mi.encodeByteArray(e,!0)},bn=function(n){return ua(n).replace(/\./g,"")},Ct=function(n){try{return Mi.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function da(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var ha=()=>da().__FIREBASE_DEFAULTS__,fa=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},pa=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Ct(n[1]);return e&&JSON.parse(e)},Tn=()=>{try{return Pi()||ha()||fa()||pa()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Vi=n=>Tn()?.emulatorHosts?.[n];var An=()=>Tn()?.config,Cn=n=>Tn()?.[`_${n}`];var At=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Qe(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Li(n){return a(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}var Ze={};function ma(){let n={prod:[],emulator:[]};for(let e of Object.keys(Ze))Ze[e]?n.emulator.push(e):n.prod.push(e);return n}function ga(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var ki=!1;function Fi(n,e){if(typeof window>"u"||typeof document>"u"||!Qe(window.location.host)||Ze[n]===e||Ze[n]||ki)return;Ze[n]=e;function t(d){return`__firebase__banner__${d}`}let r="__firebase__banner",s=ma().prod.length>0;function o(){let d=document.getElementById(r);d&&d.remove()}function l(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function c(d,E){d.setAttribute("width","24"),d.setAttribute("id",E),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function u(){let d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{ki=!0,o()},d}function f(d,E){d.setAttribute("id",E),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function m(){let d=ga(r),E=t("text"),D=document.getElementById(E)||document.createElement("span"),B=t("learnmore"),y=document.getElementById(B)||document.createElement("a"),_=t("preprendIcon"),b=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){let j=d.element;l(j),f(y,B);let T=u();c(b,_),j.append(b,D,y,T),document.body.appendChild(j)}s?(D.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function R(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xi(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(R())}function Ui(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Bi(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ji(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Wi(){let n=R();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Hi(){try{return typeof indexedDB=="object"}catch{return!1}}function Gi(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var _a="FirebaseError",F=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=_a,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,J.prototype.create)}},J=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?ya(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new F(i,l,r)}};function ya(n,e){return n.replace(va,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var va=/\{\$([^}]+)}/g;function $i(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ie(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(Ni(s)&&Ni(o)){if(!ie(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Ni(n){return n!==null&&typeof n=="object"}function Ce(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function zi(n,e){let t=new wn(n,e);return t.subscribe.bind(t)}var wn=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Ea(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=En),i.error===void 0&&(i.error=En),i.complete===void 0&&(i.complete=En);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Ea(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function En(){}var cd=14400*1e3;function H(n){return n&&n._delegate?n._delegate:n}var G=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ge="[DEFAULT]";var Dn=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new At;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wa(e))try{this.getOrInitializeService({instanceIdentifier:ge})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ge){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return a(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ge){return this.instances.has(e)}getOptions(e=ge){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ia(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ge){return this.component?this.component.multipleInstances?e:ge:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Ia(n){return n===ge?void 0:n}function wa(n){return n.instantiationMode==="EAGER"}var Dt=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Dn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var ba=[],v=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(v||{}),Ta={debug:v.DEBUG,verbose:v.VERBOSE,info:v.INFO,warn:v.WARN,error:v.ERROR,silent:v.SILENT},Aa=v.INFO,Ca={[v.DEBUG]:"log",[v.VERBOSE]:"log",[v.INFO]:"info",[v.WARN]:"warn",[v.ERROR]:"error"},Da=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Ca[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},De=class{constructor(e){this.name=e,this._logLevel=Aa,this._logHandler=Da,this._userLogHandler=null,ba.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in v))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ta[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,v.DEBUG,...e),this._logHandler(this,v.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,v.VERBOSE,...e),this._logHandler(this,v.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,v.INFO,...e),this._logHandler(this,v.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,v.WARN,...e),this._logHandler(this,v.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,v.ERROR,...e),this._logHandler(this,v.ERROR,...e)}};var Ra=(n,e)=>e.some(t=>n instanceof t),qi,Ki;function Sa(){return qi||(qi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Pa(){return Ki||(Ki=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Ji=new WeakMap,Sn=new WeakMap,Yi=new WeakMap,Rn=new WeakMap,kn=new WeakMap;function ka(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t($(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Ji.set(t,n)}).catch(()=>{}),kn.set(e,n),e}function Na(n){if(Sn.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Sn.set(n,e)}var Pn={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Sn.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Yi.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Xi(n){Pn=n(Pn)}function Oa(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Rt(this),e,...t);return Yi.set(r,e.sort?e.sort():[e]),$(r)}:Pa().includes(n)?function(...e){return n.apply(Rt(this),e),$(Ji.get(this))}:function(...e){return $(n.apply(Rt(this),e))}}function Ma(n){return typeof n=="function"?Oa(n):(n instanceof IDBTransaction&&Na(n),Ra(n,Sa())?new Proxy(n,Pn):n)}function $(n){if(n instanceof IDBRequest)return ka(n);if(Rn.has(n))return Rn.get(n);let e=Ma(n);return e!==n&&(Rn.set(n,e),kn.set(e,n)),e}var Rt=n=>kn.get(n);function Qi(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),l=$(o);return r&&o.addEventListener("upgradeneeded",c=>{r($(o.result),c.oldVersion,c.newVersion,$(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}var Va=["get","getKey","getAll","getAllKeys","count"],La=["put","add","delete","clear"],Nn=new Map;function Zi(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Nn.get(e))return Nn.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=La.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Va.includes(t)))return;let s=function(o,...l){return a(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(l.shift())),(yield Promise.all([u[t](...l),i&&c.done]))[0]})};return Nn.set(e,s),s}Xi(n=>w(p({},n),{get:(e,t,r)=>Zi(e,t)||n.get(e,t,r),has:(e,t)=>!!Zi(e,t)||n.has(e,t)}));var Mn=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Fa(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Fa(n){return n.getComponent()?.type==="VERSION"}var Vn="@firebase/app",es="0.14.6";var Y=new De("@firebase/app"),xa="@firebase/app-compat",Ua="@firebase/analytics-compat",Ba="@firebase/analytics",ja="@firebase/app-check-compat",Wa="@firebase/app-check",Ha="@firebase/auth",Ga="@firebase/auth-compat",$a="@firebase/database",za="@firebase/data-connect",qa="@firebase/database-compat",Ka="@firebase/functions",Ja="@firebase/functions-compat",Ya="@firebase/installations",Xa="@firebase/installations-compat",Za="@firebase/messaging",Qa="@firebase/messaging-compat",ec="@firebase/performance",tc="@firebase/performance-compat",nc="@firebase/remote-config",rc="@firebase/remote-config-compat",ic="@firebase/storage",sc="@firebase/storage-compat",oc="@firebase/firestore",ac="@firebase/ai",cc="@firebase/firestore-compat",lc="firebase",uc="12.6.0";var Ln="[DEFAULT]",dc={[Vn]:"fire-core",[xa]:"fire-core-compat",[Ba]:"fire-analytics",[Ua]:"fire-analytics-compat",[Wa]:"fire-app-check",[ja]:"fire-app-check-compat",[Ha]:"fire-auth",[Ga]:"fire-auth-compat",[$a]:"fire-rtdb",[za]:"fire-data-connect",[qa]:"fire-rtdb-compat",[Ka]:"fire-fn",[Ja]:"fire-fn-compat",[Ya]:"fire-iid",[Xa]:"fire-iid-compat",[Za]:"fire-fcm",[Qa]:"fire-fcm-compat",[ec]:"fire-perf",[tc]:"fire-perf-compat",[nc]:"fire-rc",[rc]:"fire-rc-compat",[ic]:"fire-gcs",[sc]:"fire-gcs-compat",[oc]:"fire-fst",[cc]:"fire-fst-compat",[ac]:"fire-vertex","fire-js":"fire-js",[lc]:"fire-js-all"};var St=new Map,hc=new Map,Fn=new Map;function ts(n,e){try{n.container.addComponent(e)}catch(t){Y.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Se(n){let e=n.name;if(Fn.has(e))return Y.debug(`There were multiple attempts to register component ${e}.`),!1;Fn.set(e,n);for(let t of St.values())ts(t,n);for(let t of hc.values())ts(t,n);return!0}function jn(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function x(n){return n==null?!1:n.settings!==void 0}var fc={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},se=new J("app","Firebase",fc);var xn=class{constructor(e,t,r){this._isDeleted=!1,this._options=p({},e),this._config=p({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new G("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw se.create("app-deleted",{appName:this._name})}};var Pe=uc;function pc(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=p({name:Ln,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw se.create("bad-app-name",{appName:String(i)});if(t||(t=An()),!t)throw se.create("no-options");let s=St.get(i);if(s){if(ie(t,s.options)&&ie(r,s.config))return s;throw se.create("duplicate-app",{appName:i})}let o=new Dt(i);for(let c of Fn.values())o.addComponent(c);let l=new xn(t,r,o);return St.set(i,l),l}function ss(n=Ln){let e=St.get(n);if(!e&&n===Ln&&An())return pc();if(!e)throw se.create("no-app",{appName:n});return e}function Re(n,e,t){let r=dc[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Y.warn(o.join(" "));return}Se(new G(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var mc="firebase-heartbeat-database",gc=1,et="firebase-heartbeat-store",On=null;function os(){return On||(On=Qi(mc,gc,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(et)}catch(t){console.warn(t)}}}}).catch(n=>{throw se.create("idb-open",{originalErrorMessage:n.message})})),On}function _c(n){return a(this,null,function*(){try{let t=(yield os()).transaction(et),r=yield t.objectStore(et).get(as(n));return yield t.done,r}catch(e){if(e instanceof F)Y.warn(e.message);else{let t=se.create("idb-get",{originalErrorMessage:e?.message});Y.warn(t.message)}}})}function ns(n,e){return a(this,null,function*(){try{let r=(yield os()).transaction(et,"readwrite");yield r.objectStore(et).put(e,as(n)),yield r.done}catch(t){if(t instanceof F)Y.warn(t.message);else{let r=se.create("idb-set",{originalErrorMessage:t?.message});Y.warn(r.message)}}})}function as(n){return`${n.name}!${n.options.appId}`}var yc=1024,vc=30,Un=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Bn(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return a(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=rs();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>vc){let i=Ic(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Y.warn(e)}})}getHeartbeatsHeader(){return a(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=rs(),{heartbeatsToSend:t,unsentEntries:r}=Ec(this._heartbeatsCache.heartbeats),i=bn(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Y.warn(e),""}})}};function rs(){return new Date().toISOString().substring(0,10)}function Ec(n,e=yc){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),is(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),is(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Bn=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return a(this,null,function*(){return Hi()?Gi().then(()=>!0).catch(()=>!1):!1})}read(){return a(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield _c(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return a(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return ns(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return a(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return ns(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function is(n){return bn(JSON.stringify({version:2,heartbeats:n})).length}function Ic(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function wc(n){Se(new G("platform-logger",e=>new Mn(e),"PRIVATE")),Se(new G("heartbeat",e=>new Un(e),"PRIVATE")),Re(Vn,es,n),Re(Vn,es,"esm2020"),Re("fire-js","")}wc("");function ws(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var bs=ws,Ts=new J("auth","Firebase",ws());var Vt=new De("@firebase/auth");function bc(n,...e){Vt.logLevel<=v.WARN&&Vt.warn(`Auth (${Pe}): ${n}`,...e)}function kt(n,...e){Vt.logLevel<=v.ERROR&&Vt.error(`Auth (${Pe}): ${n}`,...e)}function q(n,...e){throw sr(n,...e)}function U(n,...e){return sr(n,...e)}function ir(n,e,t){let r=w(p({},bs()),{[e]:t});return new J("auth","Firebase",r).create(e,{appName:n.name})}function _e(n){return ir(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tc(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&q(n,"argument-error"),ir(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function sr(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Ts.create(n,...e)}function h(n,e,...t){if(!n)throw sr(e,...t)}function X(n){let e="INTERNAL ASSERTION FAILED: "+n;throw kt(e),new Error(e)}function Q(n,e){n||X(e)}function Gn(){return typeof self<"u"&&self.location?.href||""}function Ac(){return cs()==="http:"||cs()==="https:"}function cs(){return typeof self<"u"&&self.location?.protocol||null}function Cc(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ac()||Bi()||"connection"in navigator)?navigator.onLine:!0}function Dc(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ye=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Q(t>e,"Short delay should be less than long delay!"),this.isMobile=xi()||ji()}get(){return Cc()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function or(n,e){Q(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Lt=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;X("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;X("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;X("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Rc={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Sc=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Pc=new ye(3e4,6e4);function ar(n,e){return n.tenantId&&!e.tenantId?w(p({},e),{tenantId:n.tenantId}):e}function Ee(s,o,l,c){return a(this,arguments,function*(n,e,t,r,i={}){return As(n,i,()=>a(null,null,function*(){let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});let m=Ce(p({key:n.config.apiKey},f)).slice(1),d=yield n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);let E=p({method:e,headers:d},u);return Ui()||(E.referrerPolicy="no-referrer"),n.emulatorConfig&&Qe(n.emulatorConfig.host)&&(E.credentials="include"),Lt.fetch()(yield Cs(n,n.config.apiHost,t,m),E)}))})}function As(n,e,t){return a(this,null,function*(){n._canInitEmulator=!1;let r=p(p({},Rc),e);try{let i=new $n(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Pt(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let l=s.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pt(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Pt(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Pt(n,"user-disabled",o);let f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw ir(n,f,u);q(n,f)}}catch(i){if(i instanceof F)throw i;q(n,"network-request-failed",{message:String(i)})}})}function kc(s,o,l,c){return a(this,arguments,function*(n,e,t,r,i={}){let u=yield Ee(n,e,t,r,i);return"mfaPendingCredential"in u&&q(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function Cs(n,e,t,r){return a(this,null,function*(){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?or(n.config,i):`${n.config.apiScheme}://${i}`;return Sc.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}var $n=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(U(this.auth,"network-request-failed")),Pc.get())})}};function Pt(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=U(n,e,r);return i.customData._tokenResponse=t,i}function Nc(n,e){return a(this,null,function*(){return Ee(n,"POST","/v1/accounts:delete",e)})}function Ft(n,e){return a(this,null,function*(){return Ee(n,"POST","/v1/accounts:lookup",e)})}function tt(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Ds(n,e=!1){return a(this,null,function*(){let t=H(n),r=yield t.getIdToken(e),i=cr(r);h(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:tt(Wn(i.auth_time)),issuedAtTime:tt(Wn(i.iat)),expirationTime:tt(Wn(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Wn(n){return Number(n)*1e3}function cr(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return kt("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ct(t);return i?JSON.parse(i):(kt("Failed to decode base64 JWT payload"),null)}catch(i){return kt("Caught error parsing JWT payload as JSON",i?.toString()),null}}function ls(n){let e=cr(n);return h(e,"internal-error"),h(typeof e.exp<"u","internal-error"),h(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ne(n,e,t=!1){return a(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof F&&Oc(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Oc({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var zn=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>a(this,null,function*(){yield this.iteration()}),t)}iteration(){return a(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var rt=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tt(this.lastLoginAt),this.creationTime=tt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function xt(n){return a(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),r=yield Ne(n,Ft(e,{idToken:t}));h(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?Ss(i.providerUserInfo):[],o=Mc(n.providerData,s),l=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,u=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new rt(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,f)})}function Rs(n){return a(this,null,function*(){let e=H(n);yield xt(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Mc(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Ss(n){return n.map(r=>{var i=r,{providerId:e}=i,t=Fe(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function Vc(n,e){return a(this,null,function*(){let t=yield As(n,{},()=>a(null,null,function*(){let r=Ce({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=yield Cs(n,i,"/v1/token",`key=${s}`),l=yield n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:l,body:r};return n.emulatorConfig&&Qe(n.emulatorConfig.host)&&(c.credentials="include"),Lt.fetch()(o,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Lc(n,e){return a(this,null,function*(){return Ee(n,"POST","/v2/accounts:revokeToken",ar(n,e))})}var nt=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){h(e.idToken,"internal-error"),h(typeof e.idToken<"u","internal-error"),h(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ls(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){h(e.length!==0,"internal-error");let t=ls(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return a(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(h(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return a(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield Vc(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(h(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(h(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(h(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return X("not implemented")}};function oe(n,e){h(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ae=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=Fe(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new rt(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return a(this,null,function*(){let t=yield Ne(this,this.stsTokenManager.getToken(this.auth,e));return h(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Ds(this,e)}reload(){return Rs(this)}_assign(e){this!==e&&(h(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>p({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(w(p({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){h(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return a(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield xt(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return a(this,null,function*(){if(x(this.auth.app))return Promise.reject(_e(this.auth));let e=yield this.getIdToken();return yield Ne(this,Nc(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return w(p({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>p({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,l=t.tenantId??void 0,c=t._redirectEventId??void 0,u=t.createdAt??void 0,f=t.lastLoginAt??void 0,{uid:m,emailVerified:d,isAnonymous:E,providerData:D,stsTokenManager:B}=t;h(m&&B,e,"internal-error");let y=nt.fromJSON(this.name,B);h(typeof m=="string",e,"internal-error"),oe(r,e.name),oe(i,e.name),h(typeof d=="boolean",e,"internal-error"),h(typeof E=="boolean",e,"internal-error"),oe(s,e.name),oe(o,e.name),oe(l,e.name),oe(c,e.name),oe(u,e.name),oe(f,e.name);let _=new n({uid:m,auth:e,email:i,emailVerified:d,displayName:r,isAnonymous:E,photoURL:o,phoneNumber:s,tenantId:l,stsTokenManager:y,createdAt:u,lastLoginAt:f});return D&&Array.isArray(D)&&(_.providerData=D.map(b=>p({},b))),c&&(_._redirectEventId=c),_}static _fromIdTokenResponse(e,t,r=!1){return a(this,null,function*(){let i=new nt;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield xt(s),s})}static _fromGetAccountInfoResponse(e,t,r){return a(this,null,function*(){let i=t.users[0];h(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Ss(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,l=new nt;l.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new rt(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c})}};var us=new Map;function Z(n){Q(n instanceof Function,"Expected a class definition");let e=us.get(n);return e?(Q(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,us.set(n,e),e)}var Fc=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return a(this,null,function*(){return!0})}_set(t,r){return a(this,null,function*(){this.storage[t]=r})}_get(t){return a(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return a(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),qn=Fc;function Nt(n,e,t){return`firebase:${n}:${e}:${t}`}var Ut=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Nt(this.userKey,i.apiKey,s),this.fullPersistenceKey=Nt("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return a(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Ft(this.auth,{idToken:e}).catch(()=>{});return t?ae._fromGetAccountInfoResponse(this.auth,t,e):null}return ae._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return a(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return a(this,null,function*(){if(!t.length)return new n(Z(qn),e,r);let i=(yield Promise.all(t.map(u=>a(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||Z(qn),o=Nt(r,e.config.apiKey,e.name),l=null;for(let u of t)try{let f=yield u._get(o);if(f){let m;if(typeof f=="string"){let d=yield Ft(e,{idToken:f}).catch(()=>{});if(!d)break;m=yield ae._fromGetAccountInfoResponse(e,d,f)}else m=ae._fromJSON(e,f);u!==s&&(l=m),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],l&&(yield s._set(o,l.toJSON())),yield Promise.all(t.map(u=>a(null,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new n(s,e,r))})}};function ds(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Os(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ps(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Vs(e))return"Blackberry";if(Ls(e))return"Webos";if(ks(e))return"Safari";if((e.includes("chrome/")||Ns(e))&&!e.includes("edge/"))return"Chrome";if(Ms(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Ps(n=R()){return/firefox\//i.test(n)}function ks(n=R()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ns(n=R()){return/crios\//i.test(n)}function Os(n=R()){return/iemobile/i.test(n)}function Ms(n=R()){return/android/i.test(n)}function Vs(n=R()){return/blackberry/i.test(n)}function Ls(n=R()){return/webos/i.test(n)}function lr(n=R()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function xc(n=R()){return lr(n)&&!!window.navigator?.standalone}function Uc(){return Wi()&&document.documentMode===10}function Fs(n=R()){return lr(n)||Ms(n)||Ls(n)||Vs(n)||/windows phone/i.test(n)||Os(n)}function xs(n,e=[]){let t;switch(n){case"Browser":t=ds(R());break;case"Worker":t=`${ds(R())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Pe}/${r}`}var Kn=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,l)=>{try{let c=e(s);o(c)}catch(c){l(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return a(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Bc(t){return a(this,arguments,function*(n,e={}){return Ee(n,"GET","/v2/passwordPolicy",ar(n,e))})}var jc=6,Jn=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??jc,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Yn=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bt(this),this.idTokenSubscription=new Bt(this),this.beforeStateQueue=new Kn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ts,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Z(t)),this._initializationPromise=this.queue(()=>a(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield Ut.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return a(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return a(this,null,function*(){try{let t=yield Ft(this,{idToken:e}),r=yield ae._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return a(this,null,function*(){if(x(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!s||s===o)&&l?.user&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return h(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return a(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return a(this,null,function*(){try{yield xt(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Dc()}_delete(){return a(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return a(this,null,function*(){if(x(this.app))return Promise.reject(_e(this));let t=e?H(e):null;return t&&h(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return a(this,null,function*(){if(!this._deleted)return e&&h(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>a(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return a(this,null,function*(){return x(this.app)?Promise.reject(_e(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return x(this.app)?Promise.reject(_e(this)):this.queue(()=>a(this,null,function*(){yield this.assertedPersistence.setPersistence(Z(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return a(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return a(this,null,function*(){let e=yield Bc(this),t=new Jn(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new J("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return a(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Lc(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return a(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return a(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Z(e)||this._popupRedirectResolver;h(t,this,"argument-error"),this.redirectPersistenceManager=yield Ut.create(this,[Z(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return a(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>a(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return a(this,null,function*(){if(e===this.currentUser)return this.queue(()=>a(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,l=this._isInitialized?Promise.resolve():this._initializationPromise;if(h(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return a(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return h(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return a(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return a(this,null,function*(){if(x(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&bc(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function Kt(n){return H(n)}var Bt=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=zi(t=>this.observer=t)}get next(){return h(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ur={loadJS(){return a(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Wc(n){ur=n}function Hc(n){return ur.loadJS(n)}function Gc(){return ur.gapiScript}function Us(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Bs(n,e){let t=jn(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(ie(s,e??{}))return i;q(i,"already-initialized")}return t.initialize({options:e})}function $c(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Z);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function js(n,e,t){let r=Kt(n);h(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=Ws(e),{host:o,port:l}=zc(e),c=l===null?"":`:${l}`,u={url:`${s}//${o}${c}/`},f=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){h(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),h(ie(u,r.config.emulator)&&ie(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Qe(o)?(Li(`${s}//${o}${c}`),Fi("Auth",!0)):i||qc()}function Ws(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function zc(n){let e=Ws(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:hs(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:hs(o)}}}function hs(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function qc(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var it=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return X("not implemented")}_getIdTokenResponse(e){return X("not implemented")}_linkToIdToken(e,t){return X("not implemented")}_getReauthenticationResolver(e){return X("not implemented")}};function ke(n,e){return a(this,null,function*(){return kc(n,"POST","/v1/accounts:signInWithIdp",ar(n,e))})}var Kc="http://localhost",jt=class n extends it{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):q("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let l=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=l,s=Fe(l,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return ke(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,ke(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,ke(e,t)}buildRequest(){let e={requestUri:Kc,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ce(t)}return e}};var st=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Wt=class extends st{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var dr=(()=>{class n extends Wt{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return jt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var ot=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return a(this,null,function*(){let s=yield ae._fromIdTokenResponse(e,r,i),o=fs(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return a(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=fs(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function fs(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Xn=class n extends F{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Hs(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Xn._fromErrorAndOperation(n,s,e,r):s})}function Jc(n,e,t=!1){return a(this,null,function*(){let r=yield Ne(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ot._forOperation(n,"link",r)})}function Yc(n,e,t=!1){return a(this,null,function*(){let{auth:r}=n;if(x(r.app))return Promise.reject(_e(r));let i="reauthenticate";try{let s=yield Ne(n,Hs(r,i,e,n),t);h(s.idToken,r,"internal-error");let o=cr(s.idToken);h(o,r,"internal-error");let{sub:l}=o;return h(n.uid===l,r,"user-mismatch"),ot._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&q(r,"user-mismatch"),s}})}function Xc(n,e,t=!1){return a(this,null,function*(){if(x(n.app))return Promise.reject(_e(n));let r="signIn",i=yield Hs(n,r,e),s=yield ot._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function Zc(n,e){return a(this,null,function*(){return Ee(n,"POST","/v1/accounts:update",e)})}function hr(r,i){return a(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let s=H(n),l={idToken:yield s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=yield Ne(s,Zc(s.auth,l));s.displayName=c.displayName||null,s.photoURL=c.photoUrl||null;let u=s.providerData.find(({providerId:f})=>f==="password");u&&(u.displayName=s.displayName,u.photoURL=s.photoURL),yield s._updateTokensIfNecessary(c)})}function Gs(n,e,t,r){return H(n).onIdTokenChanged(e,t,r)}function $s(n,e,t){return H(n).beforeAuthStateChanged(e,t)}function fr(n,e,t,r){return H(n).onAuthStateChanged(e,t,r)}function pr(n){return H(n).signOut()}var Ht="__sak";var Gt=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ht,"1"),this.storage.removeItem(Ht),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Qc=1e3,el=10,tl=(()=>{class n extends Gt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Fs(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((l,c,u)=>{this.notifyListeners(l,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let l=this.storage.getItem(i);!r&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);Uc()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,el):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},Qc)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return a(this,null,function*(){yield ue(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return a(this,null,function*(){let r=yield ue(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return a(this,null,function*(){yield ue(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),zs=tl;var nl=(()=>{class n extends Gt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),mr=nl;function rl(n){return Promise.all(n.map(e=>a(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var il=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return a(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,l=this.handlersMap[s];if(!l?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(l).map(f=>a(this,null,function*(){return f(r.origin,o)})),u=yield rl(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function gr(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Zn=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return a(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{let u=gr("",20);i.port1.start();let f=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){let d=m;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(d.data.response);break;default:clearTimeout(f),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function z(){return window}function sl(n){z().location.href=n}function qs(){return typeof z().WorkerGlobalScope<"u"&&typeof z().importScripts=="function"}function ol(){return a(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function al(){return navigator?.serviceWorker?.controller||null}function cl(){return qs()?self:null}var Ks="firebaseLocalStorageDb",ll=1,$t="firebaseLocalStorage",Js="fbase_key",ve=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Jt(n,e){return n.transaction([$t],e?"readwrite":"readonly").objectStore($t)}function ul(){let n=indexedDB.deleteDatabase(Ks);return new ve(n).toPromise()}function Qn(){let n=indexedDB.open(Ks,ll);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore($t,{keyPath:Js})}catch(i){t(i)}}),n.addEventListener("success",()=>a(null,null,function*(){let r=n.result;r.objectStoreNames.contains($t)?e(r):(r.close(),yield ul(),e(yield Qn()))}))})}function ps(n,e,t){return a(this,null,function*(){let r=Jt(n,!0).put({[Js]:e,value:t});return new ve(r).toPromise()})}function dl(n,e){return a(this,null,function*(){let t=Jt(n,!1).get(e),r=yield new ve(t).toPromise();return r===void 0?null:r.value})}function ms(n,e){let t=Jt(n,!0).delete(e);return new ve(t).toPromise()}var hl=800,fl=3,pl=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return a(this,null,function*(){return this.db?this.db:(this.db=yield Qn(),this.db)})}_withRetries(t){return a(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>fl)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return a(this,null,function*(){return qs()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return a(this,null,function*(){this.receiver=il._getInstance(cl()),this.receiver._subscribe("keyChanged",(t,r)=>a(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>a(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return a(this,null,function*(){if(this.activeServiceWorker=yield ol(),!this.activeServiceWorker)return;this.sender=new Zn(this.activeServiceWorker);let t=yield this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return a(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||al()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return a(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Qn();return yield ps(t,Ht,"1"),yield ms(t,Ht),!0}catch{}return!1})}_withPendingWrite(t){return a(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return a(this,null,function*(){return this._withPendingWrite(()=>a(this,null,function*(){return yield this._withRetries(i=>ps(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return a(this,null,function*(){let r=yield this._withRetries(i=>dl(i,t));return this.localCache[t]=r,r})}_remove(t){return a(this,null,function*(){return this._withPendingWrite(()=>a(this,null,function*(){return yield this._withRetries(r=>ms(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return a(this,null,function*(){let t=yield this._withRetries(s=>{let o=Jt(s,!1).getAll();return new ve(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>a(this,null,function*(){return this._poll()}),hl)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Ys=pl;var Fd=Us("rcb"),xd=new ye(3e4,6e4);function Xs(n,e){return e?Z(e):(h(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var at=class extends it{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ke(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ke(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ke(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function ml(n){return Xc(n.auth,new at(n),n.bypassAuthState)}function gl(n){let{auth:e,user:t}=n;return h(t,e,"internal-error"),Yc(t,new at(n),n.bypassAuthState)}function _l(n){return a(this,null,function*(){let{auth:e,user:t}=n;return h(t,e,"internal-error"),Jc(t,new at(n),n.bypassAuthState)})}var zt=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>a(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return a(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(l)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ml;case"linkViaPopup":case"linkViaRedirect":return _l;case"reauthViaPopup":case"reauthViaRedirect":return gl;default:q(this.auth,"internal-error")}}resolve(e){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var yl=new ye(2e3,1e4);function _r(n,e,t){return a(this,null,function*(){if(x(n.app))return Promise.reject(U(n,"operation-not-supported-in-this-environment"));let r=Kt(n);Tc(n,e,st);let i=Xs(r,t);return new vl(r,"signInViaPopup",e,i).executeNotNull()})}var vl=(()=>{class n extends zt{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return a(this,null,function*(){let t=yield this.execute();return h(t,this.auth,"internal-error"),t})}onExecution(){return a(this,null,function*(){Q(this.filter.length===1,"Popup operations only handle one event");let t=gr();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(U(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(U(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(U(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,yl.get())};t()}}n.currentPopupAction=null;return n})(),El="pendingRedirect",Ot=new Map,er=class n extends zt{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return a(this,null,function*(){let e=Ot.get(this.auth._key());if(!e){try{let r=(yield Il(this.resolver,this.auth))?yield ue(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ot.set(this.auth._key(),e)}return this.bypassAuthState||Ot.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return a(this,null,function*(){if(e.type==="signInViaRedirect")return ue(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,ue(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return a(this,null,function*(){})}cleanUp(){}};function Il(n,e){return a(this,null,function*(){let t=Tl(e),r=bl(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function wl(n,e){Ot.set(n._key(),e)}function bl(n){return Z(n._redirectPersistence)}function Tl(n){return Nt(El,n.config.apiKey,n.name)}function Al(n,e,t=!1){return a(this,null,function*(){if(x(n.app))return Promise.reject(_e(n));let r=Kt(n),i=Xs(r,e),o=yield new er(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var Cl=600*1e3,tr=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Dl(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Zs(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(U(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Cl&&this.cachedEventUids.clear(),this.cachedEventUids.has(gs(e))}saveEventToCache(e){this.cachedEventUids.add(gs(e)),this.lastProcessedEventTime=Date.now()}};function gs(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Zs({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Dl(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zs(n);default:return!1}}function Rl(t){return a(this,arguments,function*(n,e={}){return Ee(n,"GET","/v1/projects",e)})}var Sl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pl=/^https?/;function kl(n){return a(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Rl(n);for(let t of e)try{if(Nl(t))return}catch{}q(n,"unauthorized-domain")})}function Nl(n){let e=Gn(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!Pl.test(t))return!1;if(Sl.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Ol=new ye(3e4,6e4);function _s(){let n=z().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Ml(n){return new Promise((e,t)=>{function r(){_s(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_s(),t(U(n,"network-request-failed"))},timeout:Ol.get()})}if(z().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(z().gapi?.load)r();else{let i=Us("iframefcb");return z()[i]=()=>{gapi.load?r():t(U(n,"network-request-failed"))},Hc(`${Gc()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw Mt=null,e})}var Mt=null;function Vl(n){return Mt=Mt||Ml(n),Mt}var Ll=new ye(5e3,15e3),Fl="__/auth/iframe",xl="emulator/auth/iframe",Ul={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jl(n){let e=n.config;h(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?or(e,xl):`https://${n.config.authDomain}/${Fl}`,r={apiKey:e.apiKey,appName:n.name,v:Pe},i=Bl.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Ce(r).slice(1)}`}function Wl(n){return a(this,null,function*(){let e=yield Vl(n),t=z().gapi;return h(t,n,"internal-error"),e.open({where:document.body,url:jl(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ul,dontclear:!0},r=>new Promise((i,s)=>a(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=U(n,"network-request-failed"),l=z().setTimeout(()=>{s(o)},Ll.get());function c(){z().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var Hl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Gl=500,$l=600,zl="_blank",ql="http://localhost",qt=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Kl(n,e,t,r=Gl,i=$l){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),l="",c=w(p({},Hl),{width:r.toString(),height:i.toString(),top:s,left:o}),u=R().toLowerCase();t&&(l=Ns(u)?zl:t),Ps(u)&&(e=e||ql,c.scrollbars="yes");let f=Object.entries(c).reduce((d,[E,D])=>`${d}${E}=${D},`,"");if(xc(u)&&l!=="_self")return Jl(e||"",l),new qt(null);let m=window.open(e||"",l,f);h(m,n,"popup-blocked");try{m.focus()}catch{}return new qt(m)}function Jl(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Yl="__/auth/handler",Xl="emulator/auth/handler",Zl=encodeURIComponent("fac");function ys(n,e,t,r,i,s){return a(this,null,function*(){h(n.config.authDomain,n,"auth-domain-config-required"),h(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Pe,eventId:i};if(e instanceof st){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",$i(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,m]of Object.entries(s||{}))o[f]=m}if(e instanceof Wt){let f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}n.tenantId&&(o.tid=n.tenantId);let l=o;for(let f of Object.keys(l))l[f]===void 0&&delete l[f];let c=yield n._getAppCheckToken(),u=c?`#${Zl}=${encodeURIComponent(c)}`:"";return`${Ql(n)}?${Ce(l).slice(1)}${u}`})}function Ql({config:n}){return n.emulator?or(n,Xl):`https://${n.authDomain}/${Yl}`}var Hn="webStorageSupport",nr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mr,this._completeRedirectFn=Al,this._overrideRedirectResult=wl}_openPopup(e,t,r,i){return a(this,null,function*(){Q(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let s=yield ys(e,t,r,Gn(),i);return Kl(e,s,gr())})}_openRedirect(e,t,r,i){return a(this,null,function*(){yield this._originValidation(e);let s=yield ys(e,t,r,Gn(),i);return sl(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Q(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return a(this,null,function*(){let t=yield Wl(e),r=new tr(e);return t.register("authEvent",i=>(h(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Hn,{type:Hn},i=>{let s=i?.[0]?.[Hn];s!==void 0&&t(!!s),q(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=kl(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Fs()||ks()||lr()}},Qs=nr;var vs="@firebase/auth",Es="1.11.1";var rr=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return a(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){h(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function eu(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tu(n){Se(new G("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;h(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xs(n)},u=new Yn(r,i,s,c);return $c(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Se(new G("auth-internal",e=>{let t=Kt(e.getProvider("auth").getImmediate());return(r=>new rr(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Re(vs,Es,eu(n)),Re(vs,Es,"esm2020")}var nu=300,ru=Cn("authIdTokenMaxAge")||nu,Is=null,iu=n=>e=>a(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>ru)return;let i=t?.token;Is!==i&&(Is=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function yr(n=ss()){let e=jn(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Bs(n,{popupRedirectResolver:Qs,persistence:[Ys,zs,mr]}),r=Cn("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=iu(s.toString());$s(t,o,()=>o(t.currentUser)),Gs(t,l=>o(l))}}let i=Vi("auth");return i&&js(t,`http://${i}`),t}function su(){return document.getElementsByTagName("head")?.[0]??document}Wc({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=U("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",su().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tu("Browser");var Ve=class{},ct=class{},K=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=t.slice(r+1).trim();this.addHeaderEntry(i,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(l=>s.indexOf(l)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Xt=class{encodeKey(e){return eo(e)}encodeValue(e){return eo(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function ou(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,l]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(l),t.set(o,c)}),t}var au=/%(\d[a-f0-9])/gi,cu={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function eo(n){return encodeURIComponent(n).replace(au,(e,t)=>cu[t]??e)}function Yt(n){return`${n}`}var ee=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Xt,e.fromString){if(e.fromObject)throw new V(2805,!1);this.map=ou(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Yt):[Yt(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Yt(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Yt(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Zt=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function lu(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function to(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function no(n){return typeof Blob<"u"&&n instanceof Blob}function ro(n){return typeof FormData<"u"&&n instanceof FormData}function uu(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var io="Content-Type",so="Accept",oo="X-Request-URL",ao="text/plain",co="application/json",du=`${co}, ${ao}, */*`,Oe=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let s;if(lu(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s){if(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,this.keepalive=!!s.keepalive,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),s.priority&&(this.priority=s.priority),s.cache&&(this.cache=s.cache),s.credentials&&(this.credentials=s.credentials),typeof s.timeout=="number"){if(s.timeout<1||!Number.isInteger(s.timeout))throw new V(2822,"");this.timeout=s.timeout}s.mode&&(this.mode=s.mode),s.redirect&&(this.redirect=s.redirect),s.integrity&&(this.integrity=s.integrity),s.referrer&&(this.referrer=s.referrer),this.transferCache=s.transferCache}if(this.headers??=new K,this.context??=new Zt,!this.params)this.params=new ee,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let l=t.indexOf("?"),c=l===-1?"?":l<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||to(this.body)||no(this.body)||ro(this.body)||uu(this.body)?this.body:this.body instanceof ee?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||ro(this.body)?null:no(this.body)?this.body.type||null:to(this.body)?null:typeof this.body=="string"?ao:this.body instanceof ee?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?co:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.keepalive??this.keepalive,o=e.priority||this.priority,l=e.cache||this.cache,c=e.mode||this.mode,u=e.redirect||this.redirect,f=e.credentials||this.credentials,m=e.referrer||this.referrer,d=e.integrity||this.integrity,E=e.transferCache??this.transferCache,D=e.timeout??this.timeout,B=e.body!==void 0?e.body:this.body,y=e.withCredentials??this.withCredentials,_=e.reportProgress??this.reportProgress,b=e.headers||this.headers,j=e.params||this.params,T=e.context??this.context;return e.setHeaders!==void 0&&(b=Object.keys(e.setHeaders).reduce((ce,le)=>ce.set(le,e.setHeaders[le]),b)),e.setParams&&(j=Object.keys(e.setParams).reduce((ce,le)=>ce.set(le,e.setParams[le]),j)),new n(t,r,B,{params:j,headers:b,context:T,reportProgress:_,responseType:i,withCredentials:y,transferCache:E,keepalive:s,cache:l,priority:o,timeout:D,mode:c,redirect:u,credentials:f,referrer:m,integrity:d})}},Ie=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(Ie||{}),Le=class{headers;status;statusText;url;ok;type;redirected;constructor(e,t=200,r="OK"){this.headers=e.headers||new K,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}},Qt=class n extends Le{constructor(e={}){super(e)}type=Ie.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},lt=class n extends Le{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Ie.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}},Me=class extends Le{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},hu=200,fu=204;function vr(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer}}var tn=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Oe)s=t;else{let c;i.headers instanceof K?c=i.headers:c=new K(i.headers);let u;i.params&&(i.params instanceof ee?u=i.params:u=new ee({fromObject:i.params})),s=new Oe(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,integrity:i.integrity,timeout:i.timeout})}let o=rn(s).pipe(Dr(c=>this.handler.handle(c)));if(t instanceof Oe||i.observe==="events")return o;let l=o.pipe(Cr(c=>c instanceof lt));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return l.pipe(de(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new V(2806,!1);return c.body}));case"blob":return l.pipe(de(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new V(2807,!1);return c.body}));case"text":return l.pipe(de(c=>{if(c.body!==null&&typeof c.body!="string")throw new V(2808,!1);return c.body}));case"json":default:return l.pipe(de(c=>c.body))}case"response":return l;default:throw new V(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new ee().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,vr(i,r))}post(t,r,i={}){return this.request("POST",t,vr(i,r))}put(t,r,i={}){return this.request("PUT",t,vr(i,r))}static \u0275fac=function(r){return new(r||n)(he(Ve))};static \u0275prov=S({token:n,factory:n.\u0275fac})}return n})();var pu=new P("");function mu(n,e){return e(n)}function gu(n,e,t){return(r,i)=>Nr(t,()=>e(r,s=>n(s,i)))}var lo=new P(""),uo=new P(""),ho=new P("",{providedIn:"root",factory:()=>!0});var en=(()=>{class n extends Ve{backend;injector;chain=null;pendingTasks=A(Mr);contributeToStability=A(ho);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(lo),...this.injector.get(uo,[])]));this.chain=r.reduceRight((i,s)=>gu(i,s,this.injector),mu)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Rr(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(he(ct),he(kr))};static \u0275prov=S({token:n,factory:n.\u0275fac})}return n})();var _u=/^\)\]\}',?\n/,yu=RegExp(`^${oo}:`,"m");function vu(n){return"responseURL"in n&&n.responseURL?n.responseURL:yu.test(n.getAllResponseHeaders())?n.getResponseHeader(oo):null}var Er=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new V(-2800,!1);let r=this.xhrFactory;return rn(null).pipe(Sr(()=>new Ir(s=>{let o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((y,_)=>o.setRequestHeader(y,_.join(","))),t.headers.has(so)||o.setRequestHeader(so,du),!t.headers.has(io)){let y=t.detectContentTypeHeader();y!==null&&o.setRequestHeader(io,y)}if(t.timeout&&(o.timeout=t.timeout),t.responseType){let y=t.responseType.toLowerCase();o.responseType=y!=="json"?y:"text"}let l=t.serializeBody(),c=null,u=()=>{if(c!==null)return c;let y=o.statusText||"OK",_=new K(o.getAllResponseHeaders()),b=vu(o)||t.url;return c=new Qt({headers:_,status:o.status,statusText:y,url:b}),c},f=()=>{let{headers:y,status:_,statusText:b,url:j}=u(),T=null;_!==fu&&(T=typeof o.response>"u"?o.responseText:o.response),_===0&&(_=T?hu:0);let ce=_>=200&&_<300;if(t.responseType==="json"&&typeof T=="string"){let le=T;T=T.replace(_u,"");try{T=T!==""?JSON.parse(T):null}catch(go){T=le,ce&&(ce=!1,T={error:go,text:T})}}ce?(s.next(new lt({body:T,headers:y,status:_,statusText:b,url:j||void 0})),s.complete()):s.error(new Me({error:T,headers:y,status:_,statusText:b,url:j||void 0}))},m=y=>{let{url:_}=u(),b=new Me({error:y,status:o.status||0,statusText:o.statusText||"Unknown Error",url:_||void 0});s.error(b)},d=m;t.timeout&&(d=y=>{let{url:_}=u(),b=new Me({error:new DOMException("Request timed out","TimeoutError"),status:o.status||0,statusText:o.statusText||"Request timeout",url:_||void 0});s.error(b)});let E=!1,D=y=>{E||(s.next(u()),E=!0);let _={type:Ie.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(_.total=y.total),t.responseType==="text"&&o.responseText&&(_.partialText=o.responseText),s.next(_)},B=y=>{let _={type:Ie.UploadProgress,loaded:y.loaded};y.lengthComputable&&(_.total=y.total),s.next(_)};return o.addEventListener("load",f),o.addEventListener("error",m),o.addEventListener("timeout",d),o.addEventListener("abort",m),t.reportProgress&&(o.addEventListener("progress",D),l!==null&&o.upload&&o.upload.addEventListener("progress",B)),o.send(l),s.next({type:Ie.Sent}),()=>{o.removeEventListener("error",m),o.removeEventListener("abort",m),o.removeEventListener("load",f),o.removeEventListener("timeout",d),t.reportProgress&&(o.removeEventListener("progress",D),l!==null&&o.upload&&o.upload.removeEventListener("progress",B)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(r){return new(r||n)(he(Br))};static \u0275prov=S({token:n,factory:n.\u0275fac})}return n})(),fo=new P(""),Eu="XSRF-TOKEN",Iu=new P("",{providedIn:"root",factory:()=>Eu}),wu="X-XSRF-TOKEN",bu=new P("",{providedIn:"root",factory:()=>wu}),ut=class{},Tu=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ur(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(he(Or),he(Iu))};static \u0275prov=S({token:n,factory:n.\u0275fac})}return n})();function Au(n,e){let t=n.url.toLowerCase();if(!A(fo)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=A(ut).getToken(),i=A(bu);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function Cu(...n){let e=[tn,Er,en,{provide:Ve,useExisting:en},{provide:ct,useFactory:()=>A(pu,{optional:!0})??A(Er)},{provide:lo,useValue:Au,multi:!0},{provide:fo,useValue:!0},{provide:ut,useClass:Tu}];for(let t of n)e.push(...t.\u0275providers);return Pr(e)}var po={production:!0,googleSheets:{enabled:!0,quotationUrl:"https://script.google.com/macros/s/AKfycbwHIuLbQ2-bdvAvqF7_9OxKeu7ct8s01kiNCUSApBQkwpgXSbct_G6Sghr9hUdWZhuX/exec",commentsUrl:"https://script.google.com/macros/s/AKfycbwwwJ-TWZH1hTb3B4_Ejio9xmccyILy8JC2jp1bRviffLZKBO64Z9qvbAn5jP_3-8J4Mw/exec",notificationUrl:"https://script.google.com/macros/s/AKfycbyswU2iuaGFrOMEjm2skpPqYLzNUAt1IJjX7U0P2zAuiBPycadGbMKU2NTaCdz9_lcr/exec"},portalApiUrl:"https://api.mandy-94b.workers.dev",firebase:{apiKey:"AIzaSyA6Rlau-Ats3mVvrxQfEimWAgylmPJbuuw",authDomain:"portal-c1b36.firebaseapp.com",projectId:"portal-c1b36",storageBucket:"portal-c1b36.firebasestorage.app",messagingSenderId:"235746173672",appId:"1:235746173672:web:bbe0a081c9293965975f5d",measurementId:"G-DJMC35VQ0W"}};var mo=(()=>{let e=class e{constructor(){this.http=A(tn),this.apiUrl=po.portalApiUrl+"/api/portal"}getUserMe(r){let i=new K({Authorization:`Bearer ${r}`,"x-platform-key":"quotation"});return this.http.get(`${this.apiUrl}/user/me`,{headers:i})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var nn=class{static mapD1ToUserData(e){let{user:t,profiles:r}=e,i=r?.quotation;return{uid:t.id,email:t.email,displayName:t.displayName,photoURL:t.photoURL,platforms:{quotation:i?{role:i.role,premiumUntil:i.premiumUntil,firstAccessTime:i.firstAccessTime,lastAccessTime:i.lastAccessTime}:void 0},createdAt:t.createdAt,updatedAt:t.updatedAt}}static mapMany(e){return e.map(t=>this.mapD1ToUserData(t))}};var np=(()=>{let e=class e{constructor(){this.analyticsService=A(Ri),this.toastService=A(Si),this.authApi=A(mo),this.auth=null,this.currentUser=L(null),this.userData=L(null),this.isAuthenticated=O(()=>this.currentUser()!==null),this.userDisplayName=O(()=>this.currentUser()?.displayName||"\u8A2A\u5BA2"),this.userPhotoURL=O(()=>this.currentUser()?.photoURL||null),this.userEmail=O(()=>this.currentUser()?.email||null),this.userId=O(()=>this.currentUser()?.uid||null),this.isPremium=O(()=>this.userRole()==="premium"),this.isAdmin=O(()=>this.userRole()==="admin"),this.userRole=O(()=>this.userData()?.platforms?.quotation?.role||"free")}initializeAuth(){this.auth=yr(),fr(this.auth,r=>a(this,null,function*(){this.currentUser.set(r),r?(yield this.loadUserData(r),this.analyticsService.trackEvent("user_signed_in",{method:"google",user_id:r.uid,user_role:this.userRole()})):this.userData.set(null)}))}loadUserData(r){return a(this,null,function*(){try{let i=yield r.getIdToken(),s=yield Tr(this.authApi.getUserMe(i)),o=nn.mapD1ToUserData(s);this.userData.set(o)}catch(i){console.error("\u7121\u6CD5\u5F9E D1 \u8F09\u5165\u4F7F\u7528\u8005\u8CC7\u6599:",i),this.analyticsService.trackError(i,"load_user_data_d1"),this.userData.set(null)}})}loginWithGoogle(){return a(this,null,function*(){if(!this.auth)throw new Error("Firebase Auth not initialized");try{let r=new dr;r.setCustomParameters({prompt:"select_account"});let i=yield _r(this.auth,r);return this.analyticsService.trackEvent("login_success",{method:"google",user_id:i.user.uid}),i}catch(r){throw console.error("Login failed:",r),this.analyticsService.trackEvent("login_failed",{method:"google",error_code:r.code,error_message:r.message}),r}})}logout(){return a(this,null,function*(){if(!this.auth)throw new Error("Firebase Auth not initialized");try{let r=this.userId();yield pr(this.auth),this.analyticsService.trackEvent("logout_success",{user_id:r})}catch(r){throw console.error("Logout failed:",r),this.analyticsService.trackEvent("logout_failed",{error_message:r.message}),r}})}getCurrentUser(){return this.currentUser()}getIdToken(){return a(this,null,function*(){let r=this.currentUser();if(!r)return null;try{return yield r.getIdToken()}catch(i){return console.error("Failed to get ID token:",i),null}})}updateDisplayName(r){return a(this,null,function*(){let i=this.currentUser();if(!i)throw new Error("\u4F7F\u7528\u8005\u672A\u767B\u5165");let s=r.trim();if(!s)throw new Error("\u986F\u793A\u540D\u7A31\u4E0D\u80FD\u70BA\u7A7A");if(s.length>50)throw new Error("\u986F\u793A\u540D\u7A31\u4E0D\u80FD\u8D85\u904E 50 \u500B\u5B57");try{yield hr(i,{displayName:s});let o=this.userData();o&&this.userData.set(w(p({},o),{displayName:s})),this.toastService.success("\u986F\u793A\u540D\u7A31\u5DF2\u66F4\u65B0")}catch(o){throw console.error("Failed to update display name:",o),this.analyticsService.trackError(o,"update_display_name"),o}})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();export{K as a,tn as b,Cu as c,pc as d,Re as e,yr as f,yo as g,Zr as h,jr as i,$u as j,zu as k,Go as l,Ku as m,zo as n,vi as o,Ii as p,Xo as q,Ti as r,Ju as s,Yu as t,ia as u,oa as v,ca as w,Xu as x,Zu as y,Qu as z,Ri as A,po as B,Si as C,nn as D,np as E};
