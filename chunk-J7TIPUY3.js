import{$ as T,$a as A,Ab as w,Bb as m,C as Y,Db as O,Fb as ne,G as J,Ha as ee,O as Q,R as X,Tb as C,Ub as f,Vb as B,W as I,Xa as R,Xb as V,Ya as F,Yb as h,_a as K,aa as k,ab as L,b as q,ba as z,da as j,fb as l,g as $,ga as y,gb as g,ha as Z,j as G,lb as N,mb as M,n as H,nc as oe,ob as S,pb as P,ya as d,zb as te}from"./chunk-4R6RTNNY.js";import{a,b as x}from"./chunk-FJYW2LMB.js";var ie=Symbol("DEEP_SIGNAL");function se(t){return new Proxy(t,{has(e,n){return!!this.get(e,n,void 0)},get(e,n){let o=C(e);return!de(o)||!(n in o)?(y(e[n])&&e[n][ie]&&delete e[n],e[n]):(y(e[n])||(Object.defineProperty(e,n,{value:f(()=>e()[n]),configurable:!0}),e[n][ie]=!0),se(e[n]))}})}var ue=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function de(t){if(t===null||typeof t!="object"||le(t))return!1;let e=Object.getPrototypeOf(t);if(e===Object.prototype)return!0;for(;e&&e!==Object.prototype;){if(ue.includes(e.constructor))return!1;e=Object.getPrototypeOf(e)}return e===Object.prototype}function le(t){return typeof t?.[Symbol.iterator]=="function"}var ge=new WeakMap,u=Symbol("STATE_SOURCE");function Ie(t,...e){let n=C(()=>re(t)),o=e.reduce((r,c)=>a(a({},r),typeof c=="function"?c(r):c),n),s=t[u],i=Reflect.ownKeys(t[u]);for(let r of Reflect.ownKeys(o))if(i.includes(r)){let c=r;n[c]!==o[c]&&s[c].set(o[c])}me(t)}function re(t){let e=t[u];return Reflect.ownKeys(t[u]).reduce((n,o)=>{let s=e[o]();return x(a({},n),{[o]:s})},{})}function fe(t){return ge.get(t[u])||[]}function me(t){let e=fe(t);for(let n of e){let o=C(()=>re(t));n(o)}}function je(...t){let e=[...t],n=typeof e[0]=="function"?{}:e.shift(),o=e;return(()=>{class i{constructor(){let c=o.reduce((E,ae)=>ae(E),pe()),{stateSignals:b,props:p,methods:_,hooks:v}=c,D=a(a(a({},b),p),_);this[u]=c[u];for(let E of Reflect.ownKeys(D))this[E]=D[E];let{onInit:W,onDestroy:U}=v;W&&W(),U&&I(j).onDestroy(U)}static \u0275fac=function(b){return new(b||i)};static \u0275prov=X({token:i,factory:i.\u0275fac,providedIn:n.providedIn||null})}return i})()}function pe(){return{[u]:{},stateSignals:{},props:{},methods:{},hooks:{}}}function he(t){return e=>{let n=t(a(a(a({[u]:e[u]},e.stateSignals),e.props),e.methods));return x(a({},e),{props:a(a({},e.props),n)})}}function De(t){return he(e=>{let n=t(e);return Reflect.ownKeys(n).reduce((s,i)=>{let r=n[i];return x(a({},s),{[i]:y(r)?r:f(r)})},{})})}function Ee(t){return e=>{let n=t(a(a(a({[u]:e[u]},e.stateSignals),e.props),e.methods));return x(a({},e),{methods:a(a({},e.methods),n)})}}function ze(t){return e=>{let n=typeof t=="function"?t():t,o=Reflect.ownKeys(n),s=e[u],i={};for(let r of o)s[r]=Z(n[r]),i[r]=se(s[r]);return x(a({},e),{stateSignals:a(a({},e.stateSignals),i)})}}function Ae(t,e){let n=e?.injector??I(z),o=new $,s=t(o).subscribe();n.get(j).onDestroy(()=>s.unsubscribe());let i=(r,c)=>{if(be(r))return o.next(r),{destroy:q};let b=ye(),p=c?.injector??b??n;if(y(r)){let v=B(()=>{let D=r();C(()=>o.next(D))},{injector:p});return s.add({unsubscribe:()=>v.destroy()}),v}let _=r.subscribe(v=>o.next(v));return s.add(_),p!==n&&p.get(j).onDestroy(()=>_.unsubscribe()),{destroy:()=>_.unsubscribe()}};return i.destroy=s.unsubscribe.bind(s),i}function be(t){return!y(t)&&!H(t)}function ye(){try{return I(z)}catch{return}}function qe(t,e,n){let o=typeof t=="function"?{next:t,error:e,complete:n}:t;return s=>s.pipe(Q({next:o.next,complete:o.complete}),Y(i=>(o.error(i),G)),o.finalize?J(o.finalize):i=>i)}function Se(t,e){if(t&1&&(l(0,"option",10),m(1),g()),t&2){let n=e.$implicit,o=P(2);M("value",n)("selected",n===o.pageSize()),d(),O(" ",n," ")}}function Pe(t,e){if(t&1){let n=N();l(0,"div",1)(1,"span",8),m(2,"\u6BCF\u9801\u986F\u793A"),g(),l(3,"select",9),S("change",function(s){T(n);let i=P();return k(i.onPageSizeChange(s))}),A(4,Se,2,3,"option",10,K),g(),l(6,"span",8),m(7,"\u7B46"),g()()}if(t&2){let n=P();d(4),L(n.pageSizeOptions())}}function ve(t,e){if(t&1){let n=N();l(0,"button",11),S("click",function(){let s=T(n).$implicit,i=P();return k(i.goToPage(s))}),m(1),g()}if(t&2){let n=e.$implicit,o=P();w(o.btnClass()),te("btn-active",n===o.currentPage()),d(),O(" ",n," ")}}function xe(t,e){if(t&1&&(l(0,"div"),m(1),g()),t&2){let n=P();d(),ne(" \u986F\u793A\u7B2C ",n.startIndex()," - ",n.endIndex()," \u7B46\uFF0C\u5171 ",n.totalItems()," \u7B46 ")}}var Je=(()=>{let e=class e{constructor(){this.totalItems=h.required(),this.pageSize=h(10),this.currentPage=h(1),this.pageSizeOptions=h([5,10,20,50]),this.showPageSizeSelector=h(!0),this.showInfo=h(!0),this.maxVisiblePages=h(5),this.size=h("sm"),this.pageChange=V(),this.pageSizeChange=V(),this.totalPages=f(()=>{let o=this.totalItems(),s=this.pageSize();return Math.ceil(o/s)||1}),this.visiblePages=f(()=>{let o=this.totalPages(),s=this.currentPage(),i=this.maxVisiblePages();if(o<=i)return Array.from({length:o},(b,p)=>p+1);let r=Math.max(1,s-Math.floor(i/2)),c=r+i-1;return c>o&&(c=o,r=Math.max(1,c-i+1)),Array.from({length:c-r+1},(b,p)=>r+p)}),this.btnClass=f(()=>`join-item btn ${{xs:"btn-xs",sm:"btn-sm",md:"",lg:"btn-lg"}[this.size()]}`),this.startIndex=f(()=>this.totalItems()===0?0:(this.currentPage()-1)*this.pageSize()+1),this.endIndex=f(()=>{let o=this.currentPage()*this.pageSize();return Math.min(o,this.totalItems())}),this.isFirstPage=f(()=>this.currentPage()<=1),this.isLastPage=f(()=>this.currentPage()>=this.totalPages())}goToPage(o){o>=1&&o<=this.totalPages()&&o!==this.currentPage()&&this.pageChange.emit(o)}goToFirstPage(){this.goToPage(1)}goToLastPage(){this.goToPage(this.totalPages())}goToPreviousPage(){this.goToPage(this.currentPage()-1)}goToNextPage(){this.goToPage(this.currentPage()+1)}onPageSizeChange(o){let s=o.target,i=parseInt(s.value,10);i!==this.pageSize()&&(this.pageSizeChange.emit(i),this.pageChange.emit(1))}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=ee({type:e,selectors:[["app-pagination"]],inputs:{totalItems:[1,"totalItems"],pageSize:[1,"pageSize"],currentPage:[1,"currentPage"],pageSizeOptions:[1,"pageSizeOptions"],showPageSizeSelector:[1,"showPageSizeSelector"],showInfo:[1,"showInfo"],maxVisiblePages:[1,"maxVisiblePages"],size:[1,"size"]},outputs:{pageChange:"pageChange",pageSizeChange:"pageSizeChange"},decls:14,vars:14,consts:[[1,"flex","flex-col","md:flex-row","items-center","justify-between","gap-4","mt-4","pt-4","border-t","border-base-200"],[1,"flex","items-center","gap-2"],[1,"join"],["type","button","title","\u7B2C\u4E00\u9801",3,"click","disabled"],["type","button","title","\u4E0A\u4E00\u9801",3,"click","disabled"],["type","button",3,"class","btn-active"],["type","button","title","\u4E0B\u4E00\u9801",3,"click","disabled"],["type","button","title","\u6700\u5F8C\u4E00\u9801",3,"click","disabled"],[1,"text-base-content/70"],[1,"select","select-bordered","select-sm","w-20",3,"change"],[3,"value","selected"],["type","button",3,"click"]],template:function(s,i){s&1&&(l(0,"div",0),R(1,Pe,8,0,"div",1),l(2,"div",2)(3,"button",3),S("click",function(){return i.goToFirstPage()}),m(4," \xAB "),g(),l(5,"button",4),S("click",function(){return i.goToPreviousPage()}),m(6," \u2039 "),g(),A(7,ve,2,5,"button",5,K),l(9,"button",6),S("click",function(){return i.goToNextPage()}),m(10," \u203A "),g(),l(11,"button",7),S("click",function(){return i.goToLastPage()}),m(12," \xBB "),g()(),R(13,xe,2,3,"div"),g()),s&2&&(d(),F(i.showPageSizeSelector()?1:-1),d(2),w(i.btnClass()),M("disabled",i.isFirstPage()),d(2),w(i.btnClass()),M("disabled",i.isFirstPage()),d(2),L(i.visiblePages()),d(2),w(i.btnClass()),M("disabled",i.isLastPage()),d(2),w(i.btnClass()),M("disabled",i.isLastPage()),d(2),F(i.showInfo()?13:-1))},dependencies:[oe],encapsulation:2});let t=e;return t})();export{Je as a,Ie as b,je as c,De as d,Ee as e,ze as f,Ae as g,qe as h};
